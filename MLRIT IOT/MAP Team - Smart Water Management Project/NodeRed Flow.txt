
NODE RED FLOW



[{"id":"9591feee.b3b1e","type":"tab","label":"smart water management","disabled":false,"info":""},{"id":"1ae6e823.6ec808","type":"ibmiot in","z":"9591feee.b3b1e","authentication":"apiKey","apiKey":"1a240bd9.36ef54","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"555","applicationId":"","deviceType":"water555","eventType":"","commandType":"","format":"json","name":"IBM IoT","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":false,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":140,"y":160,"wires":[["61aa7c1f.b7a724","9d5b1290.db5d"]]},{"id":"61aa7c1f.b7a724","type":"debug","z":"9591feee.b3b1e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":360,"y":160,"wires":[]},{"id":"9d5b1290.db5d","type":"function","z":"9591feee.b3b1e","name":"flow","func":"global.set(\"flowrate\",msg.payload.d.house1_flowRate)\nmsg.payload=msg.payload.d.house1_flowRate\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":260,"wires":[["79c7dccb.407024","8a059238.71adc"]]},{"id":"79c7dccb.407024","type":"debug","z":"9591feee.b3b1e","name":"flow","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":450,"y":260,"wires":[]},{"id":"8a059238.71adc","type":"ui_gauge","z":"9591feee.b3b1e","name":"","group":"a76220e8.f99ce","order":1,"width":0,"height":0,"gtype":"gage","title":"flow","label":"units","format":"{{value}}","min":0,"max":10,"colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":570,"y":200,"wires":[]},{"id":"c337a4c4.351e08","type":"ui_button","z":"9591feee.b3b1e","name":"","group":"a76220e8.f99ce","order":2,"width":0,"height":0,"passthru":false,"label":"tap on1","tooltip":"","color":"","bgcolor":"","icon":"","payload":"tap_on1","payloadType":"str","topic":"","x":200,"y":400,"wires":[["9022018b.7440a","cea00d6d.af8c4"]]},{"id":"59bf6384.b6867c","type":"ui_button","z":"9591feee.b3b1e","name":"","group":"a76220e8.f99ce","order":3,"width":0,"height":0,"passthru":false,"label":"tap off","tooltip":"","color":"","bgcolor":"","icon":"","payload":"tap_off","payloadType":"str","topic":"","x":170,"y":480,"wires":[["9022018b.7440a","cea00d6d.af8c4"]]},{"id":"5763bea3.4100a","type":"http in","z":"9591feee.b3b1e","name":"","url":"/tapstatus","method":"get","upload":false,"swaggerDoc":"","x":180,"y":560,"wires":[["97954b4f.2cf268"]]},{"id":"9022018b.7440a","type":"debug","z":"9591feee.b3b1e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":390,"y":480,"wires":[]},{"id":"ecb453d0.8d94e","type":"debug","z":"9591feee.b3b1e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":670,"y":460,"wires":[]},{"id":"cea00d6d.af8c4","type":"ibmiot out","z":"9591feee.b3b1e","authentication":"apiKey","apiKey":"1a240bd9.36ef54","outputType":"cmd","deviceId":"555","deviceType":"water555","eventCommandType":"tap","format":"String","data":"data","qos":0,"name":"IBM IoT","service":"registered","x":560,"y":400,"wires":[]},{"id":"97954b4f.2cf268","type":"function","z":"9591feee.b3b1e","name":"flowrate after json parsing","func":"msg.payload=msg.payload.command\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":580,"wires":[["6738561e.8d2ff8","ecb453d0.8d94e","cea00d6d.af8c4"]]},{"id":"6738561e.8d2ff8","type":"http response","z":"9591feee.b3b1e","name":"","statusCode":"","headers":{},"x":650,"y":560,"wires":[]},{"id":"4d55a3af.b4982c","type":"http in","z":"9591feee.b3b1e","name":"requesting","url":"/flowrate","method":"get","upload":false,"swaggerDoc":"","x":210,"y":340,"wires":[["b26bf28e.2c261"]]},{"id":"29a80974.78acb6","type":"http response","z":"9591feee.b3b1e","name":"response","statusCode":"","headers":{},"x":680,"y":320,"wires":[]},{"id":"b26bf28e.2c261","type":"function","z":"9591feee.b3b1e","name":"flowrate response ","func":"msg.payload= {\"flowrate\":global.get(\"flowrate\")}\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":340,"wires":[["29a80974.78acb6"]]},{"id":"7ba9b33.f4e574c","type":"ui_button","z":"9591feee.b3b1e","name":"","group":"a76220e8.f99ce","order":3,"width":0,"height":0,"passthru":false,"label":"tap on2","tooltip":"","color":"","bgcolor":"","icon":"","payload":"tap_on2","payloadType":"str","topic":"","x":190,"y":440,"wires":[["9022018b.7440a","cea00d6d.af8c4"]]},{"id":"1a240bd9.36ef54","type":"ibmiot","z":"","name":"","keepalive":"60","serverName":"1lpuff.messaging.internetofthings.ibmcloud.com","cleansession":true,"appId":"","shared":false},{"id":"a76220e8.f99ce","type":"ui_group","z":"","name":"","tab":"876eb79b.d0d388","disp":true,"width":"6","collapse":false},{"id":"876eb79b.d0d388","type":"ui_tab","z":"","name":"smart water management","icon":"dashboard","disabled":false,"hidden":false}]